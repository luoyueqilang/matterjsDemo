var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},__awaiter=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function a(t){try{l(i.next(t))}catch(e){o(e)}}function s(t){try{l(i["throw"](t))}catch(e){o(e)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}l((i=i.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return i([t,e])}}function i(n){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,o=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=e.call(t,l)}catch(i){n=[6,i],o=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,o,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},GPage=function(t){function e(e){var n=t.call(this)||this;return n._cache=e,n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onAdded,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.onRemove,n),n.onCreate(),n}return __extends(e,t),Object.defineProperty(e.prototype,"cache",{get:function(){return this._cache},enumerable:!0,configurable:!0}),e.prototype.onCreate=function(){},e.prototype.onAdded=function(){},e.prototype.onStart=function(){},e.prototype.onRemove=function(){},e}(egret.DisplayObjectContainer);__reflect(GPage.prototype,"GPage");var GPageChangeHandler=function(){function t(){}return t.prototype.onChange=function(t,e,n){},t}();__reflect(GPageChangeHandler.prototype,"GPageChangeHandler");var Gloading=function(t){function e(){var e=t.call(this)||this;return e.onCreate(),e.addEventListener(egret.Event.ADDED_TO_STAGE,e._onAdded,e),e}return __extends(e,t),e.prototype._onAdded=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this._onAdded,this),this.onAdded()},e.prototype.onCreate=function(){},e.prototype.onAdded=function(){},e.prototype.onResLoaded=function(){},e.prototype.onProgress=function(t,e){},e.prototype.onComplete=function(){},e}(egret.DisplayObjectContainer);__reflect(Gloading.prototype,"Gloading");var Score=function(){function t(){this._data={},this._time=egret.getTimer(),this.setValue(0)}return t.prototype.setValue=function(t){var e=t.toString()+this._time;this._data={v:e}},t.prototype.getValue=function(){var t=this._data.v,e=t.substring(0,t.length-this._time.toString().length);return parseFloat(e)},t}();__reflect(Score.prototype,"Score");var GV=function(){function t(){}return t.CNZZ=function(t){window._czc&&window._czc.push(["_trackEvent",t,"click"])},t.CNBD=function(t,e){window._hmt&&window._hmt.push(["_trackEvent",t,e])},t}();__reflect(GV.prototype,"GV");var MenuPage=function(t){function e(){var e=t.call(this,!1)||this;return e.o_count=3,e._score=0,e.max_ball=15,e.ball_list=[],e}return __extends(e,t),e.prototype.onCreate=function(){},e.prototype.nextPage=function(){GG.showPage(PlayPage,new RtLHander)},e.prototype.onAdded=function(){console.log("MenuPage"),this.matter_box=new egret.DisplayObjectContainer,this.addChild(this.matter_box),this.initMatter()},e.prototype.initMatter=function(){this.engine=Matter.Engine.create(null,{enableSleeping:!1}),GV.engine=this.engine,this.runner=Matter.Runner.create(null),this.runner.isFixed=!0,GV.runner=this.runner,this.render=EgretRender.create({engine:this.engine,canvas:window.$("canvas")[0],container:this.matter_box,options:{width:stageW,height:stageH,container:this.matter_box,wireframes:!1,showBounds:!1}}),GV.render=this.render,Matter.Runner.run(this.runner,this.engine),EgretRender.run(this.render),this.world=this.engine.world},e.prototype.onStart=function(){var t=Matter.Bodies.rectangle(375,1448,800,5,{isStatic:!0,friction:.6,render:{visible:!0,strokeStyle:5592405,container:this.matter_box,name:"name1"}}),e=Matter.Bodies.rectangle(0,724,5,2448,{isStatic:!0,friction:.6,restitution:.1,render:{visible:!0,strokeStyle:5592405,container:this.matter_box,name:"name2"}}),n=Matter.Bodies.rectangle(748,724,5,2448,{isStatic:!0,friction:.6,restitution:.1,render:{visible:!0,strokeStyle:5592405,container:this.matter_box,name:"name3"}}),i=Matter.Bodies.rectangle(125,200,360,5,{isStatic:!0,firction:.6,restitution:.1,render:{visible:!0,strokeStyle:16777215,container:this.matter_box,name:"name4"}}),r=Matter.Bodies.rectangle(600,350,360,5,{isStatic:!0,firction:.6,restitution:.1,render:{visible:!0,strokeStyle:16777215,container:this.matter_box,name:"name5"}}),o=Matter.Bodies.rectangle(125,500,500,5,{isStatic:!0,firction:.6,restitution:.1,angle:.2*Math.PI,render:{visible:!0,strokeStyle:16777215,container:this.matter_box,name:"name6"}}),a=Matter.Bodies.rectangle(550,900,460,5,{isStatic:!0,firction:.6,restitution:.1,render:{visible:!0,strokeStyle:16777215,container:this.matter_box,name:"name7"}});this.wallList=[i,r,o,a],Matter.World.add(this.world,[t,e,n,i,r,o,a]),this.update_btn=GG.newBitmap("nextRound_btn_png",this),this.update_btn.touchEnabled=!0,GG.setAnchor(this.update_btn,.5,0),GG.set_xy(this.update_btn,stageHalfW,1300),this.update_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.moveBg,this),this.createBall(),this.e_orientation=new egret.DeviceOrientation,this.e_orientation.addEventListener(egret.Event.CHANGE,this.onorientation,this),this.e_orientation.start(),Matter.Events.on(GV.engine,"collisionStart",this.collisionStartHandler),stage.addEventListener("tickEvent",this.moveBg,this)},e.prototype.createBall=function(){this.ball=Matter.Bodies.circle(60,100,30,{firction:.2,restitution:.2,density:10,render:{strokeStyle:13422591,sprite:{container:this.matter_box,texture:"ball_png",xOffset:30,yOffset:30},name:"ball"}},null),this.init_y=100,Matter.World.add(this.world,this.ball),console.log(this.ball)},e.prototype.collisionStartHandler=function(t){console.log(t,"e.pairs")},e.prototype.onorientation=function(t){if(this.init_x){if(this.o_count++,this.init_y||(this.init_y=this.ball.position.y),this.o_count<3)return void(this.init_y=this.ball.position.y);this.o_count=0;var e=t.gamma-this.init_x;if(this.init_x-t.gamma<-50&&(e=-1),this.init_x-t.gamma>50&&(e=1),Math.abs(this.init_y-this.ball.position.y)>1)return;Matter.Body.applyForce(this.ball,this.ball.position,{x:10*e,y:0}),Matter.Body.rotate(this.ball,e,this.ball.position),this.init_y=this.ball.position.y}else this.init_x=t.gamma},e.prototype.moveBg=function(){},e.prototype.onRemove=function(){},e.prototype.s_softBody=function(){for(var t=this,e=Matter.Body.nextGroup(!0),n={friction:1e-4,collisionFilter:{group:e},render:{container:t,visible:!1}},i={render:{container:t,texture:"shengzi1_png",lineWidth:3}},r=Matter.Composites.softBody(100,500,18,15,10,10,!1,10,n,i),o=0;18>o;o++)r.bodies[o].isStatic=!0;Matter.World.add(this.world,r),Matter.Events.on(this.mouseConstraint,"startdrag",function(t){console.log("开始拖动")}),Matter.Events.on(this.mouseConstraint,"enddrag",function(){console.log("结束拖动")})},e.prototype.s_stack=function(){var t=Matter.Composites.stack(200,500,6,3,1,0,function(t,e){return Matter.Bodies.polygon(t,e,4,50,null)});Matter.Body.nextGroup(!0);Matter.World.add(this.world,t)},e.prototype.s_constrain=function(){var t=this;this.score_txt=new egret.TextField,this.score_txt.size=40,this.score_txt.x=40,this.score_txt.y=350,this.score_txt.textColor=16777215,this.score_txt.text="得分： "+this._score+" 分",this.addChild(this.score_txt),this.addBall_btn=new egret.TextField,this.addBall_btn.size=40,this.addBall_btn.x=40,this.addBall_btn.y=410,this.addBall_btn.textColor=16777215,this.addBall_btn.text="剩余球数: "+this.max_ball,this.addChild(this.addBall_btn),this.add_wall1=Matter.Bodies.rectangle(705,490,85,5,{isStatic:!0,friction:.6,render:{visible:!0,strokeStyle:16777215}}),this.add_wall2=Matter.Bodies.rectangle(705,788,85,5,{isStatic:!0,friction:.6,render:{visible:!0,strokeStyle:16777215}}),Matter.World.add(this.world,[Matter.Bodies.rectangle(630,400,100,5,{isStatic:!0,angle:.25*Math.PI,friction:.6,render:{visible:!0,strokeStyle:16777215}}),Matter.Bodies.rectangle(665,460,5,50,{isStatic:!0,friction:.6,render:{visible:!0,strokeStyle:16777215}}),this.add_wall1,this.add_wall2,Matter.Bodies.rectangle(630,700,100,5,{isStatic:!0,angle:.25*Math.PI,friction:.6,render:{visible:!0,strokeStyle:16777215}}),Matter.Bodies.rectangle(665,760,5,50,{isStatic:!0,friction:.6,render:{visible:!0,strokeStyle:16777215}})]);Matter.Bodies.rectangle(400,400,5,5,{isStatic:!0});this.ball=Matter.Bodies.circle(200,800,30,{firction:.2,restitution:.8,render:{strokeStyle:13422591,sprite:{container:this,texture:"ball_png",xOffset:30,yOffset:30}}},null),this.ball_list.push(this.ball);var e=this;this.ball_constrain=Matter.Constraint.create({pointA:{x:200,y:700},bodyB:e.ball,pointB:{x:0,y:0},stiffness:.01,render:{container:e,strokeStyle:16763904,lineWidth:5}}),Matter.World.add(this.world,[this.ball_constrain,this.ball]),setTimeout(function(){t.ball.egretSprite.touchEnabled=!0,t.ball.egretSprite.once(egret.TouchEvent.TOUCH_END,t.removeBall,t)},20);var n=!1;Matter.Events.on(this.engine,"collisionStart",function(i){var r=i.pairs,o=e.ball_list.length;if(!n)for(var a=0;a<r.length;a++){var s=r[a];if(o)for(var l=function(i){return s.bodyA==t.add_wall1&&s.bodyB==t.ball_list[i]?(n=!0,e._score+=10,e.score_txt.text="得分： "+e._score+" 分",setTimeout(function(){Matter.World.remove(e.world,e.ball_list[i],!0);var r=t.ball_list.indexOf(t.ball_list[i]);t.ball_list[i].egretSprite.parent.removeChild(t.ball_list[i].egretSprite),t.ball_list.splice(r,1),n=!1},1e3),{value:void 0}):s.bodyA==t.add_wall2&&s.bodyB==t.ball_list[i]?(n=!0,e._score+=5,e.score_txt.text="得分： "+e._score+" 分",setTimeout(function(){Matter.World.remove(e.world,e.ball_list[i],!0);var r=t.ball_list.indexOf(t.ball_list[i]);t.ball_list[i].egretSprite.parent.removeChild(t.ball_list[i].egretSprite),t.ball_list.splice(r,1),n=!1},1e3),{value:void 0}):void 0},h=0;o>h;h++){var c=l(h);if("object"==typeof c)return c.value}}})},e.prototype.removeBall=function(){var t=this;setTimeout(function(){Matter.World.remove(t.world,[t.ball_constrain],!0),t.ball_constrain.egretSprite.parent.removeChild(t.ball_constrain.egretSprite)},100),setTimeout(function(){t.new_ball()},3e3)},e.prototype.new_ball=function(){var t=this;if(this.max_ball--,this.max_ball>=0){this.addBall_btn.text="剩余球数："+this.max_ball,this.ball=Matter.Bodies.circle(200,800,30,{firction:.2,restitution:.8,render:{strokeStyle:13422591,sprite:{container:this,texture:"ball_png",xOffset:30,yOffset:30}}},null),this.ball_list.push(this.ball);var e=this;this.ball_constrain=Matter.Constraint.create({pointA:{x:200,y:700},bodyB:e.ball,pointB:{x:0,y:0},stiffness:.01,render:{container:e,strokeStyle:16763904,lineWidth:5}}),Matter.World.add(this.world,[this.ball_constrain,this.ball]),setTimeout(function(){t.ball.egretSprite.touchEnabled=!0,t.ball.egretSprite.once(egret.TouchEvent.TOUCH_END,t.removeBall,t)},20)}},e.prototype.s_bridge=function(){var t=Matter.Composites.stack(200,500,6,3,0,0,function(t,e){return Matter.Bodies.polygon(t,e,Math.round(Matter.Common.random(1,8)),Matter.Common.random(20,40),{restitution:.8,render:{strokeStyle:13418496}})}),e=Matter.Body.nextGroup(!0),n=Matter.Composites.stack(90,700,10,1,10,10,function(t,n){return Matter.Bodies.rectangle(t,n,50,20,{render:{strokeStyle:16777215},collisionFilter:{group:e}})});Matter.Composites.chain(n,.5,0,-.5,0,{stiffness:.9,render:{strokeStyle:16777215}}),Matter.World.add(this.world,[t,n,Matter.Constraint.create({pointA:{x:50,y:700},bodyB:n.bodies[0],pointB:{x:-25,y:0}}),Matter.Constraint.create({pointA:{x:700,y:700},bodyB:n.bodies[9],pointB:{x:25,y:0}})])},e}(GPage);__reflect(MenuPage.prototype,"MenuPage");var PlayPage=function(t){function e(){return t.call(this,!0)||this}return __extends(e,t),e.prototype.onCreate=function(){var t=(GG.newRect(stageW,stageH,15658734,this),GG.newGtext(this,6710886,50,"center"));t.y=stageHalfH,t.text="你好！PlayPage",t.width=stageW},e.prototype.onAdded=function(){},e.prototype.onStart=function(){},e.prototype.onRemove=function(){},e}(GPage);__reflect(PlayPage.prototype,"PlayPage");var RtLHander=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onChange=function(t,e,n){t.x=stageW,egret.Tween.get(e).to({x:-stageW},300),egret.Tween.get(t).to({x:0},300).call(function(){n()})},e}(GPageChangeHandler);__reflect(RtLHander.prototype,"RtLHander");var WordsPage=function(t){function e(){return t.call(this,!1)||this}return __extends(e,t),e.prototype.onCreate=function(){},e.prototype.onAdded=function(){},e.prototype.onStart=function(){GG.newRect(stageW,stageH,0,this);var t=["五年的等候.","或许不算太久.","还够了解你所在城市的每一条街"," ","也许下一秒.","就会看到你在街口.","问候一声迟到的.你好.","2017年8月20日."];this.showEffect(t)},e.prototype.showEffect=function(t){for(var e=100,n=100,i=0,r=t.length;r>i;){for(var o=t[i],a=o.length,s=0;a>s;){var l=o.charAt(s),h=GG.newGtext(this,16777215,20,"center");h.width=23,h.height=23,h.text=l,GG.setAnchor(h);var c=stageW-e-30*i;h.x=c,h.y=n+26*s,h.filters=[new egret.GlowFilter(16711680,.8,10,10,3)],l.match(/[0-9]/gi)&&(h.rotation=90),h.cacheAsBitmap=!0,h.x+=Math.random()>.5?-20:20;var d=GG.randomNumber(200,600);egret.Tween.get(h,{loop:!0}).to({x:c},d).wait(2500-d),s++}i++}},e.prototype.onRemove=function(){},e}(GPage);__reflect(WordsPage.prototype,"WordsPage");var GG;!function(t){function e(t,e,n,i,r,o,a){void 0===i&&(i="loading"),void 0===r&&(r="preload"),void 0===o&&(o="resource/"),void 0===a&&(a="resource/"),x.onReady(e,n);var s=o+"default.res.json";x.setRespath(a),x.start(s,t,i,r),stage.addChild(t)}function n(e,n){function i(){o.onStart(),t.removeDisplayObject(R),R=o}void 0===n&&(n=null),null==S&&(S={});var r=egret.getQualifiedClassName(e),o=S[r];return o||(o=new e,o.cache&&(S[r]=o)),main.addChild(o),n&&R?n.onChange(o,R,i):i(),o}function i(t){void 0===t&&(t=""),RES.VersionController.prototype.getVirtualUrl=function(e){var n=e+"";return-1==n.indexOf("?")&&t.length&&(n+="?"+t),n}}function r(e,n){void 0===n&&(n={fps:60}),o(e),t.Audio=new Gaudio,t.Evt=new egret.EventDispatcher,x=new Gloader}function o(t,e){void 0===e&&(e={fps:60}),main=t,stage=main.stage,(!egret.Capabilities.isMobile||navigator.userAgent.match(/ipad/gi))&&(stage.scaleMode=egret.StageScaleMode.SHOW_ALL,stage.orientation="auto",e.width&&e.height&&stage.setContentSize(e.width,e.height)),stageW=stage.stageWidth,stageH=stage.stageHeight,stageHalfW=stageW>>1,stageHalfH=stageH>>1,stage.frameRate=e.fps,console.log(stageW,stageH);var n=location.href;IS_LOCALHOST=n.indexOf("http://192.")>-1?!0:!1;var i=document.querySelector(".egret-player");if(i&&(screenW=+i.getAttribute("data-content-width"),screenH=+i.getAttribute("data-content-height"),canvas=i),"Android"==egret.Capabilities.os){var r=document.documentElement.clientWidth,o=document.documentElement.clientHeight;document.body.style.width=r+"px",document.body.style.height=o+"px"}}function a(t,e,n){void 0===t&&(t=null),void 0===e&&(e=0),void 0===n&&(n=0);var i=new Gimage(e,n);return t&&t.addChild(i),i}function s(t,e,n){t.x=e,t.y=n}function l(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!0);var i=new Gbutton(t,n);return i.touchEnabled=!0,e&&e.addChild(i),i}function h(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=0),void 0===n&&(n=10),void 0===i&&(i="left");var r=new Gtext;return r.textColor=e,r.textAlign=i,r.size=n,t&&t.addChild(r),r}function c(t,e,n){void 0===n&&(n=null);var i=new egret.Shape;return i.graphics.beginFill(e),i.graphics.drawCircle(0,0,t),i.graphics.endFill(),n&&n.addChild(i),i}function d(t,e){void 0===t&&(t=""),void 0===e&&(e=null);var n=new egret.Bitmap;if(""!=t){var i=RES.getRes(t);n.texture=i,n.name=t}return e&&e.addChild(n),n}function u(t,e,n,i){void 0===i&&(i=null);var r=new egret.Shape;return r.graphics.beginFill(n),r.graphics.drawRect(0,0,t,e),r.graphics.endFill(),i&&i.addChild(r),r}function p(t,e,n){void 0===t&&(t=null),void 0===n&&(n=.8);var i=u(stageW,stageH,e,t);return console.log("stageW:"+stageW),i.alpha=n,i.touchEnabled=!0,i}function f(t,e,n){void 0===e&&(e=.5),void 0===n&&(n=.5),t.anchorOffsetX=t.width*e,t.anchorOffsetY=t.height*n}function g(t){t&&t.parent&&t.parent.removeChild(t)}function _(t,e){if(t>e){var n=e;e=t,t=n}return t+Math.random()*(e-t)}function m(t,e){var n=_(t,e);return parseInt(n+"")}function v(t){return t[Math.random()*t.length|0]}function y(t,e){}function b(t){return.5*(stageW-screenW)+t}function w(t){return.5*(stageH-screenH)+t}function E(t,e){function n(){window.wx&&window.wx.getNetworkType({success:function(n){t.call(e)}})}var i=navigator.userAgent,r=!!i.match(/weibo/gi),o=!!i.match(/MicroMessenger/gi);if(o){var a=window.WeixinJSBridge;"undefined"==typeof a?document.addEventListener&&document.addEventListener("WeixinJSBridgeReady",n,!1):n()}else r&&window.WeiboJSBridge?window.WeiboJSBridge.invoke("getNetworkType",{},function(){t.call(e)}):t.call(e)}var x;t.startup=e;var S;t.showPage=n,t.setResVersion=i;var R;t.setup=r,t.setLayer=o,t.newGimage=a,t.set_xy=s,t.newGbutton=l,t.newGtext=h,t.newCircle=c,t.newBitmap=d,t.newRect=u,t.newRectBlock=p,t.setAnchor=f,t.removeDisplayObject=g,t.randomNumber=_,t.randomInt=m,t.randomArr=v,t.myConsole=y,t.fixOffsetX=b,t.fixOffsetY=w,t.autoPlay=E}(GG||(GG={}));var stage,stageW,stageH,stageHalfW,stageHalfH,screenW,screenH,main,canvas,IS_LOCALHOST,Gaudio=function(){function t(){}return Object.defineProperty(t.prototype,"isMuteSFX",{get:function(){return this._muteSFX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isMuteMusic",{get:function(){return this._muteMusic},enumerable:!0,configurable:!0}),t.prototype.muteSFX=function(t){this._muteSFX=t},t.prototype.muteMusic=function(t){this._muteMusic=t,t?this._stopChannel():this._resumeChannel()},t.prototype.playSFX=function(t,e){if(void 0===e&&(e=!0),!this._muteSFX)if(e){if("iOS"==egret.Capabilities.os){var n=RES.getRes(t);n&&n.play(0,1)}}else{var n=RES.getRes(t);n&&n.play(0,1)}},t.prototype._stopChannel=function(){this.musicChannel&&(this.position=this.musicChannel.position,this.musicChannel.stop(),this.musicChannel=null)},t.prototype._resumeChannel=function(){this.music&&this._playMusic(this.music)},t.prototype._playMusic=function(t){this._muteMusic||(this._stopChannel(),this.music=t,this.musicChannel=t.play())},t.prototype.playMusic=function(t){var e=RES.getRes(t);this._playMusic(e)},t.prototype.playMusicURL=function(t){var e=this;this._muteMusic=!1,RES.getResByUrl(t,function(t){e._playMusic(t)},this,RES.ResourceItem.TYPE_SOUND)},t}();__reflect(Gaudio.prototype,"Gaudio");var md5=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,n){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),n)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var n=this.rstr2binl(t);n.length>16&&(n=this.binl_md5(n,8*t.length));for(var i=Array(16),r=Array(16),o=0;16>o;o++)i[o]=909522486^n[o],r[o]=1549556828^n[o];var a=this.binl_md5(i.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(r.concat(a),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var n,i=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",r="",o=0;o<t.length;o++)n=t.charCodeAt(o),r+=i.charAt(n>>>4&15)+i.charAt(15&n);return r},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",r=t.length,o=0;r>o;o+=3)for(var a=t.charCodeAt(o)<<16|(r>o+1?t.charCodeAt(o+1)<<8:0)|(r>o+2?t.charCodeAt(o+2):0),s=0;4>s;s++)i+=8*o+6*s>8*t.length?this.b64pad:n.charAt(a>>>6*(3-s)&63);return i},t.prototype.rstr2any=function(t,e){var n,i,r,o,a,s=e.length,l=Array(Math.ceil(t.length/2));for(n=0;n<l.length;n++)l[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);var h=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),c=Array(h);for(i=0;h>i;i++){for(a=Array(),o=0,n=0;n<l.length;n++)o=(o<<16)+l[n],r=Math.floor(o/s),o-=r*s,(a.length>0||r>0)&&(a[a.length]=r);c[i]=o,l=a}var d="";for(n=c.length-1;n>=0;n--)d+=e.charAt(c[n]);return d},t.prototype.str2rstr_utf8=function(t){for(var e,n,i="",r=-1;++r<t.length;)e=t.charCodeAt(r),n=r+1<t.length?t.charCodeAt(r+1):0,e>=55296&&56319>=e&&n>=56320&&57343>=n&&(e=65536+((1023&e)<<10)+(1023&n),r++),127>=e?i+=String.fromCharCode(e):2047>=e?i+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return i},t.prototype.str2rstr_utf16le=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n),t.charCodeAt(n)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t.charCodeAt(n)>>>8&255,255&t.charCodeAt(n));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(var n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e},t.prototype.binl2rstr=function(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,i=-271733879,r=-1732584194,o=271733878,a=0;a<t.length;a+=16){var s=n,l=i,h=r,c=o;n=this.md5_ff(n,i,r,o,t[a+0],7,-680876936),o=this.md5_ff(o,n,i,r,t[a+1],12,-389564586),r=this.md5_ff(r,o,n,i,t[a+2],17,606105819),i=this.md5_ff(i,r,o,n,t[a+3],22,-1044525330),n=this.md5_ff(n,i,r,o,t[a+4],7,-176418897),o=this.md5_ff(o,n,i,r,t[a+5],12,1200080426),r=this.md5_ff(r,o,n,i,t[a+6],17,-1473231341),i=this.md5_ff(i,r,o,n,t[a+7],22,-45705983),n=this.md5_ff(n,i,r,o,t[a+8],7,1770035416),o=this.md5_ff(o,n,i,r,t[a+9],12,-1958414417),r=this.md5_ff(r,o,n,i,t[a+10],17,-42063),i=this.md5_ff(i,r,o,n,t[a+11],22,-1990404162),n=this.md5_ff(n,i,r,o,t[a+12],7,1804603682),o=this.md5_ff(o,n,i,r,t[a+13],12,-40341101),r=this.md5_ff(r,o,n,i,t[a+14],17,-1502002290),i=this.md5_ff(i,r,o,n,t[a+15],22,1236535329),n=this.md5_gg(n,i,r,o,t[a+1],5,-165796510),o=this.md5_gg(o,n,i,r,t[a+6],9,-1069501632),r=this.md5_gg(r,o,n,i,t[a+11],14,643717713),i=this.md5_gg(i,r,o,n,t[a+0],20,-373897302),n=this.md5_gg(n,i,r,o,t[a+5],5,-701558691),o=this.md5_gg(o,n,i,r,t[a+10],9,38016083),r=this.md5_gg(r,o,n,i,t[a+15],14,-660478335),i=this.md5_gg(i,r,o,n,t[a+4],20,-405537848),n=this.md5_gg(n,i,r,o,t[a+9],5,568446438),o=this.md5_gg(o,n,i,r,t[a+14],9,-1019803690),r=this.md5_gg(r,o,n,i,t[a+3],14,-187363961),i=this.md5_gg(i,r,o,n,t[a+8],20,1163531501),n=this.md5_gg(n,i,r,o,t[a+13],5,-1444681467),o=this.md5_gg(o,n,i,r,t[a+2],9,-51403784),r=this.md5_gg(r,o,n,i,t[a+7],14,1735328473),i=this.md5_gg(i,r,o,n,t[a+12],20,-1926607734),n=this.md5_hh(n,i,r,o,t[a+5],4,-378558),o=this.md5_hh(o,n,i,r,t[a+8],11,-2022574463),r=this.md5_hh(r,o,n,i,t[a+11],16,1839030562),i=this.md5_hh(i,r,o,n,t[a+14],23,-35309556),n=this.md5_hh(n,i,r,o,t[a+1],4,-1530992060),o=this.md5_hh(o,n,i,r,t[a+4],11,1272893353),r=this.md5_hh(r,o,n,i,t[a+7],16,-155497632),i=this.md5_hh(i,r,o,n,t[a+10],23,-1094730640),n=this.md5_hh(n,i,r,o,t[a+13],4,681279174),o=this.md5_hh(o,n,i,r,t[a+0],11,-358537222),r=this.md5_hh(r,o,n,i,t[a+3],16,-722521979),i=this.md5_hh(i,r,o,n,t[a+6],23,76029189),n=this.md5_hh(n,i,r,o,t[a+9],4,-640364487),o=this.md5_hh(o,n,i,r,t[a+12],11,-421815835),r=this.md5_hh(r,o,n,i,t[a+15],16,530742520),i=this.md5_hh(i,r,o,n,t[a+2],23,-995338651),n=this.md5_ii(n,i,r,o,t[a+0],6,-198630844),o=this.md5_ii(o,n,i,r,t[a+7],10,1126891415),r=this.md5_ii(r,o,n,i,t[a+14],15,-1416354905),i=this.md5_ii(i,r,o,n,t[a+5],21,-57434055),n=this.md5_ii(n,i,r,o,t[a+12],6,1700485571),o=this.md5_ii(o,n,i,r,t[a+3],10,-1894986606),r=this.md5_ii(r,o,n,i,t[a+10],15,-1051523),i=this.md5_ii(i,r,o,n,t[a+1],21,-2054922799),n=this.md5_ii(n,i,r,o,t[a+8],6,1873313359),o=this.md5_ii(o,n,i,r,t[a+15],10,-30611744),r=this.md5_ii(r,o,n,i,t[a+6],15,-1560198380),i=this.md5_ii(i,r,o,n,t[a+13],21,1309151649),n=this.md5_ii(n,i,r,o,t[a+4],6,-145523070),o=this.md5_ii(o,n,i,r,t[a+11],10,-1120210379),r=this.md5_ii(r,o,n,i,t[a+2],15,718787259),i=this.md5_ii(i,r,o,n,t[a+9],21,-343485551),n=this.safe_add(n,s),i=this.safe_add(i,l),r=this.safe_add(r,h),o=this.safe_add(o,c)}return[n,i,r,o]},t.prototype.md5_cmn=function(t,e,n,i,r,o){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(i,o)),r),n)},t.prototype.md5_ff=function(t,e,n,i,r,o,a){return this.md5_cmn(e&n|~e&i,t,e,r,o,a)},t.prototype.md5_gg=function(t,e,n,i,r,o,a){return this.md5_cmn(e&i|n&~i,t,e,r,o,a)},t.prototype.md5_hh=function(t,e,n,i,r,o,a){return this.md5_cmn(e^n^i,t,e,r,o,a)},t.prototype.md5_ii=function(t,e,n,i,r,o,a){return this.md5_cmn(n^(e|~i),t,e,r,o,a)},t.prototype.safe_add=function(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();__reflect(md5.prototype,"md5");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){var e=this;this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),GG.setup(this),window.addEventListener("resize",function(){GG.setLayer(e)}),RES.setMaxLoadingThread(4);var n=!1;n&&(WEB.setupOrientation(),WEB.OrientationEvt.addEventListener(WEB.PORTRAIT,function(){},this),WEB.OrientationEvt.addEventListener(WEB.LANDSCAPE,function(){},this));var i=WEB.getURLParams("debug");i?RPC.debug=!0:RPC.debug=!1,IS_LOCALHOST||(egret.ImageLoader.crossOrigin="anonymous");var r=new MyLoadingUI;GG.startup(r,function(){e.startH5(),r.onComplete()},this,"","preload","resource/","resource/")},e.prototype.startH5=function(){GG.showPage(MenuPage)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var Gloader=function(t){function e(){var e=t.call(this)||this;return e.RES_LOADING="loading",e.RES_PRELOAD="preload",e.respath="",e}return __extends(e,t),e.prototype.setRespath=function(t){this.respath=t},e.prototype.start=function(t,e,n,i){void 0===n&&(n="loading"),void 0===i&&(i="preload"),this.RES_LOADING=n,this.RES_PRELOAD=i,this.loadingView=e,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig(t+"?"+GG.randomInt(1e3,9999),this.respath)},e.prototype.onReady=function(t,e){this.readyCall=t,this.callRef=e},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),""!=this.RES_LOADING?RES.loadGroup(this.RES_LOADING):RES.loadGroup(this.RES_PRELOAD)},e.prototype.onResourceLoadComplete=function(t){t.groupName==this.RES_PRELOAD?(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.loadingView=null,this.readyCall&&(this.readyCall.call(this.callRef),this.readyCall=null,this.callRef=null)):t.groupName==this.RES_LOADING&&(this.loadingView.onResLoaded(),RES.loadGroup(this.RES_PRELOAD))},e.prototype.onResourceLoadError=function(t){this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){this.loadingView&&this.loadingView.onProgress(t.itemsLoaded,t.itemsTotal)},e}(egret.EventDispatcher);__reflect(Gloader.prototype,"Gloader");var EgretRender=function(){function t(){}return t.create=function(e){var n={controller:t,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#fafafa",wireframeBackground:"#ffffff",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!0}},i=Matter.Common.extend(n,e);return i.mouse=e.mouse,i.engine=e.engine,i.container=i.container||egret.MainContext.instance.stage,i.bounds=i.bounds||{min:{x:0,y:0},max:{x:i.width,y:i.height}},i},t.run=function(t){this.renderObj=t,egret.Ticker.getInstance().register(this.tickHandler,this)},t.stop=function(e){egret.stopTick(function(t){return e(),!1},t)},t.tickHandler=function(){t.world(this.renderObj),stage.dispatchEvent(new egret.Event("tickEvent"))},t.pause=function(){egret.Ticker.getInstance().pause(),Matter.Runner.stop(GV.runner)},t.resume=function(){egret.Ticker.getInstance().resume(),Matter.Runner.start(GV.runner,GV.engine)},t.world=function(e){var n=e.engine,i=n.world,r=(e.renderer,e.container),o=e.options,a=Matter.Composite.allBodies(i),s=Matter.Composite.allConstraints(i),l=[];o.wireframes;var h=e.bounds.max.x-e.bounds.min.x,c=e.bounds.max.y-e.bounds.min.y,d=h/e.options.width,u=c/e.options.height;if(o.hasBounds){for(var p=0;p<a.length;p++){var f=a[p];f.render.sprite.visible=Matter.Bounds.overlaps(f.bounds,e.bounds)}for(var g=0;g<s.length;g++){var _=s[g],m=_.bodyA,v=_.bodyB,y=_.pointA,b=_.pointB;m&&(y=Matter.Vector.add(m.position,_.pointA,null)),v&&(b=Matter.Vector.add(v.position,_.pointB,null)),y&&b&&(Matter.Bounds.contains(e.bounds,y)||Matter.Bounds.contains(e.bounds,b))&&l.push(_)}r.scaleX=1/d,r.scaleY=1/u,r.x=-e.bounds.min.x*(1/d),r.y=-e.bounds.min.y*(1/u)}else l=s;for(p=0;p<a.length;p++)t.body(e,a[p]);for(p=0;p<l.length;p++)t.constraint(e,l[p])},t.body=function(e,n){var i,r=(e.engine,n.render);if(r.visible)if(r.sprite&&r.sprite.texture){var o=("b-"+n.id,n.egretSprite),a=e.container;o||(o=n.egretSprite=t._createBodySprite(e,n),o.name=n.render.name,console.log(o.name,"sprite.name")),n.render.container?(i=n.render.container,i.contains(o)||i.addChild(o)):a.contains(o)||a.addChild(o),o.x=n.position.x,o.y=n.position.y,o.rotation=180*n.angle/Math.PI,o.scaleX=r.sprite.xScale||1,o.scaleY=r.sprite.yScale||1}else{var o=("b-"+n.id,n.egretSprite),a=e.container;o||(o=n.egretSprite=t._createBodyPrimitive(e,n),o.initAngle=n.angle),a.contains(o)||a.addChild(o),o.x=n.position.x,o.y=n.position.y,o.rotation=180*(n.angle-o.initAngle)/Math.PI}},t._createBodySprite=function(t,e){var n=e.render,i=n.sprite.texture,r=new egret.Bitmap,o=RES.getRes(i);return r.texture=o,r.anchorOffsetX=e.render.sprite.xOffset,r.anchorOffsetY=e.render.sprite.yOffset,r},t._createBodyPrimitive=function(t,e){var n,i,r,o,a=e.render,s=t.options,l=new MatterSprite,h=[],c=l.graphics;
c.clear();for(var d=e.parts.length>1?1:0;d<e.parts.length;d++){o=e.parts[d],s.wireframes?(n=null,i=16711680,r=1):(n=a.fillStyle,i=a.strokeStyle,r=a.lineWidth,c.beginFill(i));for(var u=0;u<o.vertices.length;u++)h.push([o.vertices[u].x-e.position.x,o.vertices[u].y-e.position.y]);c.lineStyle(2,i),c.moveTo(h[0][0],h[0][1]);for(var p=1;p<h.length;p++)c.lineTo(h[p][0],h[p][1]);c.lineTo(h[0][0],h[0][1]),c.endFill()}return l.name=e.render.name,l},t.constraint=function(t,e){var n=(t.engine,e.bodyA),i=e.bodyB,r=e.pointA,o=e.pointB,a=t.container,s=e.render,l=("c-"+e.id,e.egretSprite),h=e.render;h.container&&(a=h.container),l||(h.texture?e.egretSprite=l=new egret.Bitmap:l=e.egretSprite=new MatterSprite);var c=l;h.texture||(c=l);if(!s.visible||!e.pointA||!e.pointB)return void(h.texture||c.graphics.clear());h.texture&&h.container?h.container.contains(l)||h.container.addChild(l):a.contains(l)||a.addChild(l),h.texture||c.graphics.clear();var d,u,p,f,g,_;if(n?(d=n.position.x+r.x,u=n.position.y+r.y,g=Matter.Vector.add(n.position,e.pointA,null)):(d=r.x,u=r.y,g=e.pointA),i?(p=i.position.x+o.x,f=i.position.y+o.y,_=Matter.Vector.add(i.position,e.pointB,null)):(p=o.x,f=o.y,_=e.pointB),h)if(h.texture){c.texture||(c.texture=RES.getRes(h.texture));var m=Math.abs(p-d),v=Math.abs(f-u),y=void 0;y=p>=d?1:0;var b=Math.sqrt(Math.pow(m,2)+Math.pow(v,2)),w=5;c.height=b,h.lineWidth&&(w=h.lineWidth),c.width=w,c.anchorOffsetX=.5,c.anchorOffsetY=0,c.x=d,c.y=u;var E=180*Math.asin(v/b)/Math.PI;E?y?u>f?c.rotation=-90-E:c.rotation=E-90:u>f?c.rotation=90+E:c.rotation=90-E:y?c.rotation=-90:c.rotation=90}else if(h.strokeStyle){var x=h.strokeStyle;if(c.graphics.lineStyle(2,x),c.graphics.moveTo(d,u),"spring"===h.type)for(var S=Matter.Vector.sub(_,g,null),R=Matter.Vector.perp(Matter.Vector.normalise(S),null),C=Math.ceil(Matter.Common.clamp(e.length/5,12,20)),G=void 0,M=(g.x+S.x*(M/C)+R.x*G*4,g.y+S.y*(M/C)+R.y*G*4,1);C>M;M+=1)G=M%2===0?1:-1,c.graphics.lineTo(g.x+S.x*(M/C)+R.x*G*4,g.y+S.y*(M/C)+R.y*G*4);c.graphics.lineTo(p,f),c.graphics.endFill()}},t}();__reflect(EgretRender.prototype,"EgretRender");var MatterSprite=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(egret.Sprite);__reflect(MatterSprite.prototype,"MatterSprite");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var Galert=function(t){function e(e,n,i,r,o){void 0===r&&(r="OK"),void 0===o&&(o="");var a=t.call(this)||this,s=(GG.newRectBlock(a,0,n),stageW-200),l=GG.newGtext(a,i,25);l.width=s,l.lineSpacing=6,l.htmlText=e,l.textAlign="center",GG.setAnchor(l,.5,0),l.x=stageHalfW;var h=l.textHeight+40,c=new egret.Shape;c.graphics.beginFill(16777215),c.graphics.drawRoundRect(0,0,s+20,h+20+50,30,30),GG.setAnchor(c,.5,0),c.x=stageHalfW,a.addChild(c),c.y=stageHalfH-.5*c.height;var d=GG.newRect(s,1,i,a);GG.setAnchor(d),d.x=stageHalfW,d.y=c.y+h+20,a.addChild(l),l.y=c.y+30;var u=GG.newGtext(a,i,25,"center");if(u.width=s>>1,u.height=35,u.htmlText=r,GG.setAnchor(u,.5,0),u.x=stageHalfW,u.y=d.y+10,u.touchEnabled=!0,u.name="label1",u.addEventListener(egret.TouchEvent.TOUCH_TAP,a.checkTap,a),""!=o){u.x=stageHalfW-.5*u.width;var p=GG.newGtext(a,i,25,"center");p.width=s>>1,p.height=35,p.htmlText=o,GG.setAnchor(p,.5,0),p.x=stageHalfW+.5*p.width,p.y=d.y+10,p.touchEnabled=!0,p.name="label2",p.addEventListener(egret.TouchEvent.TOUCH_TAP,a.checkTap,a);var f=GG.newRect(1,c.y+c.height-d.y,i,a);f.x=stageHalfW,f.y=d.y}return a}return __extends(e,t),e.prototype.onTapLabel1=function(t){this._onTap1=t},e.prototype.onTapLabel2=function(t){this._onTap2=t},e.prototype.checkTap=function(t){var e=t.currentTarget.name;"label1"==e?this._onTap1&&this._onTap1():"label2"==e&&this._onTap2&&this._onTap2()},e}(egret.DisplayObjectContainer);__reflect(Galert.prototype,"Galert");var Gbutton=function(t){function e(e,n){void 0===n&&(n=!0);var i=t.call(this)||this;return i.texture=RES.getRes(e),i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAdded,i),i.addEventListener(egret.Event.REMOVED_FROM_STAGE,i.onRemove,i),i}return __extends(e,t),e.prototype.onRemove=function(){this.autoRemove&&this.removeListeners()},e.prototype.onAdded=function(){this.anchorOffsetX=this.width>>1,this.anchorOffsetY=this.height>>1,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onTap,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this._onTapBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this._onTapEnd,this)},e.prototype._disableBtn=function(){var t=this;this.touchEnabled=!1,setTimeout(function(){t.touchEnabled=!0},100)},e.prototype._onTapBegin=function(t){this.downCallback&&this.downCallback()},e.prototype._onTapEnd=function(t){this.upCallback&&this.upCallback()},e.prototype._onTap=function(t){this._disableBtn(),this.tapCallback&&this.tapCallback()},e.prototype.onTapDown=function(t){this.downCallback=t},e.prototype.onTapUp=function(t){this.upCallback=t},e.prototype.onTap=function(t){this.tapCallback=t},e.prototype.removeListeners=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._onTap,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this._onTapBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this._onTapEnd,this),this.tapCallback=null,this.downCallback=null,this.upCallback=null},e}(egret.Bitmap);__reflect(Gbutton.prototype,"Gbutton");var GbuttonMusic=function(t){function e(n,i,r){void 0===r&&(r=!0);var o=t.call(this)||this,a=GG.newGbutton(n,o,!1);return a.touchEnabled=!0,a.alpha=.8,o._muteSFX=r,o._open=n,o._close=i,0==e.frame?(a.texture=RES.getRes(n),egret.Tween.get(a,{loop:!0}).to({rotation:360},5e3)):(a.texture=RES.getRes(i),egret.Tween.removeTweens(a),a.rotation=0),a.onTapUp(function(){0==e.frame?(o.mute(!0),egret.Tween.removeTweens(a),a.rotation=0):(o.mute(!1),egret.Tween.get(a,{loop:!0}).to({rotation:360},5e3))}),o._btn=a,o}return __extends(e,t),e.prototype.mute=function(t){var n=this._btn;t?(e.frame=1,GG.Audio.muteMusic(!0),this._muteSFX&&GG.Audio.muteSFX(!0),n.texture=RES.getRes(this._close)):(e.frame=0,GG.Audio.muteMusic(!1),this._muteSFX&&GG.Audio.muteSFX(!1),n.texture=RES.getRes(this._open))},e.frame=0,e}(egret.DisplayObjectContainer);__reflect(GbuttonMusic.prototype,"GbuttonMusic");var Gimage=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=0);var i=t.call(this)||this;return i._anchorX=e,i._anchorY=n,i}return __extends(e,t),e.prototype.setUrl=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=this;RES.getResByUrl(t,function(t){i.texture=t,i.anchorOffsetX=i.width*i._anchorX,i.anchorOffsetY=i.height*i._anchorY,e&&e.call(n,this)},this,RES.ResourceItem.TYPE_IMAGE)},e.prototype.setRes=function(t){var e=this;this.texture=RES.getRes(t),e.anchorOffsetX=e.width*e._anchorX,e.anchorOffsetY=e.height*e._anchorY},e}(egret.Bitmap);__reflect(Gimage.prototype,"Gimage");var MyLoadingUI=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onCreate=function(){GG.newRect(stageW,stageH,16777215,this),this.bar=GG.newRect(stageW,4,65280,this),this.bar.scaleX=0},e.prototype.onResLoaded=function(){GG.removeDisplayObject(this.bar),this.bar=null,delete this.bar},e.prototype.onProgress=function(t,e){this.bar&&(this.bar.scaleX=t/e)},e.prototype.onComplete=function(){this.kill()},e.prototype.kill=function(){GG.removeDisplayObject(this)},e}(Gloading);__reflect(MyLoadingUI.prototype,"MyLoadingUI");var Gtext=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"htmlText",{set:function(t){var e=new egret.HtmlTextParser;this.textFlow=e.parser(t)},enumerable:!0,configurable:!0}),e}(egret.TextField);__reflect(Gtext.prototype,"Gtext");var WEB;!function(t){function e(){var t=navigator.userAgent.toString(),e=t.match(/MicroMessenger/i);return"MicroMessenger"==e?!0:!1}function n(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(e);return null!=n?decodeURI(n[2]):null}function i(t){return window[t]}function r(t){window.location.href=t}function o(t){document.title=t}function a(t){window.open("tel:"+t,"_self")}function s(t){window.open("sms:"+t,"_self")}function l(t){var e=navigator.userAgent.indexOf(t);return e>=0?!0:!1}function h(){t.OrientationEvt=new egret.EventDispatcher;var e=new egret.DeviceOrientation;e.addEventListener(egret.Event.CHANGE,c,this),e.start()}function c(e){e.beta>20&&e.beta<160||e.beta>-160&&e.beta<-20?t.isLandscape&&(t.isLandscape=!1,t.OrientationEvt.dispatchEventWith(t.PORTRAIT)):t.isLandscape||(t.isLandscape=!0,t.OrientationEvt.dispatchEventWith(t.LANDSCAPE))}t.isWeiXin=e,t.getURLParams=n,t.getVar=i,t.navigateToURL=r,t.setHtmlTitle=o,t.callPhone=a,t.sendMessage=s,t.checkUserAgent=l,t.setupOrientation=h,t.isLandscape=!1,t.PORTRAIT="portrait",t.LANDSCAPE="landscape"}(WEB||(WEB={}));var RPC;!function(t){function e(e,n,i,r){var o={};return o.version="1.0",o.method=e,o.requestId=0,o.params=n,t.debug?void setTimeout(function(){i.call(r)},1e3):void window.$.ajax({type:"POST",url:window.rpc_url+""+e,dataType:"json",data:{requestObj:JSON.stringify(o)},async:!0,success:function(t){"fail"==t.status?alert(t.msg):i.call(r,t)},error:function(t){alert(t)}})}function n(t,e,n,i,r){var o={};o.version="1.0",o.method=e,o.requestId=0,o.params=n,window.$.ajax({type:"POST",url:t,dataType:"json",data:{requestObj:JSON.stringify(o)},async:!0,success:function(t){"fail"==t.status?alert(t.msg):i.call(r,t)},error:function(t){alert(t)}})}function i(e,n,i,r,o,a){return void 0===o&&(o="POST"),void 0===a&&(a="json"),t.debug?void setTimeout(function(){i.call(r)},1e3):void window.$.ajax({type:"POST",url:window.rpc_url+""+e,dataType:"json",data:n,async:!0,success:function(t){"fail"==t.status?alert(t.msg):i.call(r,t)},error:function(t){alert(t)}})}function r(e,n,i,r,o,a){return void 0===o&&(o="POST"),void 0===a&&(a="json"),t.debug?void setTimeout(function(){i.call(r)},1e3):void window.$.ajax({type:"POST",url:e,dataType:"json",data:n,async:!0,success:function(t){"fail"==t.status?alert(t.msg):i.call(r,t)},error:function(t){alert(t)}})}t.call=e,t.callURL=n,t.call2=i,t.call2URL=r}(RPC||(RPC={}));var RPCtip=function(t){function e(){var e=t.call(this)||this,n=GG.newRect(stageW,stageH,0,e);n.alpha=0,n.touchEnabled=!0,e.rec=n;var i=GG.newBitmap("data_bg_png",e);e.bg=i;var r=GG.newBitmap("data_tip_png",e);e.bm=r;var o=new egret.TextField;return o.size=25,o.textAlign="center",e.addChild(o),e.txt=o,e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.onRemoved,e),e}return __extends(e,t),Object.defineProperty(e,"GET",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.onRemoved=function(){egret.Tween.removeTweens(this.bm)},e.prototype.showTip=function(t){this.rec.width=stageW,this.rec.height=stageH,this.bg.texture=RES.getRes("data_bg_png"),this.bg.anchorOffsetX=this.bg.width>>1,this.bg.anchorOffsetY=this.bg.height>>1,this.bg.x=stageHalfW,this.bg.y=stageHalfH,this.txt.width=160,this.txt.anchorOffsetX=80,this.txt.x=stageHalfW,this.txt.y=stageHalfH+35,this.bm.texture=RES.getRes("data_tip_png"),this.bm.anchorOffsetX=this.bm.width>>1,this.bm.anchorOffsetY=this.bm.height>>1,this.bm.x=stageHalfW,this.bm.y=stageHalfH-23,this.txt.text=t+"",egret.Tween.get(this.bm,{loop:!0}).wait(500).to({rotation:45}).wait(500).to({rotation:0}),stage.addChild(this)},e.prototype.hideTip=function(){egret.Tween.removeTweens(this.bm),GG.removeDisplayObject(this)},e}(egret.DisplayObjectContainer);__reflect(RPCtip.prototype,"RPCtip");